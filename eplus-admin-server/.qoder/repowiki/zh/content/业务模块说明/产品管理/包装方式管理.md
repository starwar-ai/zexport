# 包装方式管理

<cite>
**本文档引用的文件**
- [PackageTypeApi.java](file://eplus-module-pms/eplus-module-pms-api/src/main/java/com/syj/eplus/module/pms/api/packageType/PackageTypeApi.java)
- [PackageTypeApiImpl.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/api/PackageTypeApiImpl.java)
- [PackageTypeDTO.java](file://eplus-module-pms/eplus-module-pms-api/src/main/java/com/syj/eplus/module/pms/api/packageType/dto/PackageTypeDTO.java)
- [PackageTypeService.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/service/packagetype/PackageTypeService.java)
- [PackageTypeDO.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/dal/dataobject/packagetype/PackageTypeDO.java)
- [PackageTypeSaveReqVO.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/vo/PackageTypeSaveReqVO.java)
- [PackageTypePageReqVO.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/vo/PackageTypePageReqVO.java)
- [PackageTypeRespVO.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/vo/PackageTypeRespVO.java)
- [PackageTypeSimplePageReqVO.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/vo/PackageTypeSimplePageReqVO.java)
- [PackageTypeDetailReq.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/vo/PackageTypeDetailReq.java)
</cite>

## 目录
1. [引言](#引言)
2. [包装方式数据结构](#包装方式数据结构)
3. [核心组件](#核心组件)
4. [API接口文档](#api接口文档)
5. [应用场景](#应用场景)
6. [与SKU的关联关系](#与sku的关联关系)
7. [数据导入导出功能](#数据导入导出功能)
8. [数据校验规则](#数据校验规则)
9. [结论](#结论)

## 引言
包装方式管理是企业供应链管理中的重要组成部分，涉及采购、物流、仓储等多个业务环节。本系统通过统一的包装方式管理模块，实现了包装方式的标准化定义、维护和使用。包装方式不仅作为SKU的基础属性存在，还在出运计划、报关单据等场景中发挥重要作用。本文档详细介绍了包装方式管理的各个方面，包括数据结构、API接口、应用场景以及数据管理功能。

## 包装方式数据结构
包装方式的数据结构设计遵循标准化原则，包含基本信息和扩展属性。核心数据结构包括包装方式编号、名称、英文名称等关键属性。

```mermaid
erDiagram
pms_package_type {
bigint id PK "主键"
varchar code "包装方式编号"
varchar name "包装方式名称"
varchar nameEng "包装方式英文名称"
datetime createTime "创建时间"
datetime updateTime "更新时间"
}
```

**图源**
- [PackageTypeDO.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/dal/dataobject/packagetype/PackageTypeDO.java#L23-L43)

**包装方式属性说明：**
- **主键(id)**: 包装方式的唯一标识符，自动生成
- **编号(code)**: 包装方式的业务编号，用于系统内识别
- **名称(name)**: 包装方式的中文名称，必填项
- **英文名称(nameEng)**: 包装方式的英文名称，必填项
- **创建时间(createTime)**: 记录包装方式创建的时间戳
- **更新时间(updateTime)**: 记录包装方式最后修改的时间戳

**包装方式数据结构特点：**
1. 继承自BaseDO基类，包含通用的审计字段
2. 使用MyBatis Plus注解实现数据库映射
3. 支持Oracle、PostgreSQL等数据库的主键自增序列
4. 采用Lombok注解减少样板代码

**本节来源**
- [PackageTypeDO.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/dal/dataobject/packagetype/PackageTypeDO.java#L1-L43)

## 核心组件
包装方式管理模块由多个核心组件构成，包括API接口、服务实现、数据对象和控制器等层次，形成了完整的MVC架构。

```mermaid
classDiagram
class PackageTypeApi {
+List<PackageTypeDTO> getList()
+PackageTypeDTO getById(Long id)
+Map<Long, PackageTypeDTO> getByIdList(List<Long> packageIdList)
+Map<Long,String> getAllNameCache()
}
class PackageTypeApiImpl {
-PackageTypeService packageTypeService
+List<PackageTypeDTO> getList()
+PackageTypeDTO getById(Long id)
+Map<Long, PackageTypeDTO> getByIdList(List<Long> packageIdList)
+Map<Long,String> getAllNameCache()
}
class PackageTypeService {
+Long createPackageType(PackageTypeSaveReqVO createReqVO)
+void updatePackageType(PackageTypeSaveReqVO updateReqVO)
+void deletePackageType(Long id)
+PackageTypeRespVO getPackageType(PackageTypeDetailReq packageTypeDetailReq)
+PageResult<PackageTypeDO> getPackageTypePage(PackageTypePageReqVO pageReqVO)
+String getProcessDefinitionKey()
+void approveTask(Long userId, BpmTaskApproveReqDTO reqDTO)
+void rejectTask(Long userId, BpmTaskRejectReqDTO reqDTO)
+void submitTask(Long id, Long userId)
+void updateAuditStatus(Long auditableId, Integer auditStatus)
+List<PackageTypeDO> getList(PackageTypeSimplePageReqVO pageReqVO)
+PackageTypeDO getById(Long id)
+List<PackageTypeDO> getByIdList(List<Long> packageIdList)
+Map<Long,String> getAllNameCache()
}
class PackageTypeDO {
+Long id
+String code
+String name
+String nameEng
}
class PackageTypeDTO {
+Long id
+String code
+String name
+String nameEng
}
class PackageTypeController {
+Long createPackageType(PackageTypeSaveReqVO createReqVO)
+void updatePackageType(PackageTypeSaveReqVO updateReqVO)
+void deletePackageType(Long id)
+PackageTypeRespVO getPackageType(Long id)
+PackageTypeRespVO getPackageTypeByProcessId(String processInstanceId)
+PageResult<PackageTypeRespVO> getPackageTypePage(PackageTypePageReqVO pageReqVO)
+void exportPackageTypeExcel(PackageTypePageReqVO pageReqVO, HttpServletResponse response)
+List<PackageTypeRespVO> getSimpleList(PackageTypeSimplePageReqVO pageReqVO)
}
PackageTypeApi <|-- PackageTypeApiImpl : "实现"
PackageTypeApiImpl --> PackageTypeService : "依赖"
PackageTypeService --> PackageTypeDO : "操作"
PackageTypeController --> PackageTypeService : "调用"
PackageTypeConvert <--> PackageTypeDO : "转换"
PackageTypeConvert <--> PackageTypeDTO : "转换"
PackageTypeConvert <--> PackageTypeRespVO : "转换"
```

**图源**
- [PackageTypeApi.java](file://eplus-module-pms/eplus-module-pms-api/src/main/java/com/syj/eplus/module/pms/api/packageType/PackageTypeApi.java#L9-L22)
- [PackageTypeApiImpl.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/api/PackageTypeApiImpl.java#L18-L51)
- [PackageTypeService.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/service/packagetype/PackageTypeService.java#L18-L106)
- [PackageTypeDO.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/dal/dataobject/packagetype/PackageTypeDO.java#L23-L43)
- [PackageTypeDTO.java](file://eplus-module-pms/eplus-module-pms-api/src/main/java/com/syj/eplus/module/pms/api/packageType/dto/PackageTypeDTO.java#L7-L21)

**本节来源**
- [PackageTypeApi.java](file://eplus-module-pms/eplus-module-pms-api/src/main/java/com/syj/eplus/module/pms/api/packageType/PackageTypeApi.java#L1-L23)
- [PackageTypeApiImpl.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/api/PackageTypeApiImpl.java#L1-L51)
- [PackageTypeService.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/service/packagetype/PackageTypeService.java#L1-L106)
- [PackageTypeDO.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/dal/dataobject/packagetype/PackageTypeDO.java#L1-L43)
- [PackageTypeDTO.java](file://eplus-module-pms/eplus-module-pms-api/src/main/java/com/syj/eplus/module/pms/api/packageType/dto/PackageTypeDTO.java#L1-L21)

## API接口文档
包装方式管理提供了完整的RESTful API接口，支持增删改查等基本操作，以及分页查询、数据导出等高级功能。

### 查询接口
```mermaid
sequenceDiagram
participant Client as "客户端"
participant Controller as "PackageTypeController"
participant Service as "PackageTypeService"
participant Mapper as "PackageTypeMapper"
participant DB as "数据库"
Client->>Controller : GET /api/package-type/page
Controller->>Service : getPackageTypePage(pageReqVO)
Service->>Mapper : selectPage(pageReqVO)
Mapper->>DB : 执行SQL查询
DB-->>Mapper : 返回查询结果
Mapper-->>Service : 返回PageResult<PackageTypeDO>
Service-->>Controller : 返回PageResult<PackageTypeDO>
Controller->>Controller : convert转换为RespVO
Controller-->>Client : 返回PageResult<PackageTypeRespVO>
```

**图源**
- [PackageTypeController.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/PackageTypeController.java)
- [PackageTypeService.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/service/packagetype/PackageTypeService.java#L56-L57)
- [PackageTypeMapper.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/dal/mysql/packagetype/PackageTypeMapper.java)

### 创建接口
```mermaid
sequenceDiagram
participant Client as "客户端"
participant Controller as "PackageTypeController"
participant Service as "PackageTypeService"
participant Mapper as "PackageTypeMapper"
participant DB as "数据库"
Client->>Controller : POST /api/package-type/create
Controller->>Controller : 参数校验
Controller->>Service : createPackageType(createReqVO)
Service->>Service : 构建PackageTypeDO
Service->>Mapper : insert(packageTypeDO)
Mapper->>DB : 执行INSERT语句
DB-->>Mapper : 返回插入结果
Mapper-->>Service : 返回主键ID
Service-->>Controller : 返回主键ID
Controller-->>Client : 返回创建的包装方式ID
```

**图源**
- [PackageTypeController.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/PackageTypeController.java)
- [PackageTypeService.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/service/packagetype/PackageTypeService.java#L26-L27)
- [PackageTypeMapper.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/dal/mysql/packagetype/PackageTypeMapper.java)

### 更新接口
```mermaid
sequenceDiagram
participant Client as "客户端"
participant Controller as "PackageTypeController"
participant Service as "PackageTypeService"
participant Mapper as "PackageTypeMapper"
participant DB as "数据库"
Client->>Controller : POST /api/package-type/update
Controller->>Controller : 参数校验
Controller->>Service : updatePackageType(updateReqVO)
Service->>Mapper : selectById(id)
Mapper->>DB : 执行SELECT查询
DB-->>Mapper : 返回PackageTypeDO
Mapper-->>Service : 返回PackageTypeDO
Service->>Service : 更新DO对象属性
Service->>Mapper : updateById(packageTypeDO)
Mapper->>DB : 执行UPDATE语句
DB-->>Mapper : 返回更新结果
Mapper-->>Service : 返回更新结果
Service-->>Controller : 返回成功
Controller-->>Client : 返回成功响应
```

**图源**
- [PackageTypeController.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/PackageTypeController.java)
- [PackageTypeService.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/service/packagetype/PackageTypeService.java#L33-L34)
- [PackageTypeMapper.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/dal/mysql/packagetype/PackageTypeMapper.java)

### 删除接口
```mermaid
sequenceDiagram
participant Client as "客户端"
participant Controller as "PackageTypeController"
participant Service as "PackageTypeService"
participant Mapper as "PackageTypeMapper"
participant DB as "数据库"
Client->>Controller : DELETE /api/package-type/delete?id=123
Controller->>Service : deletePackageType(id)
Service->>Mapper : deleteById(id)
Mapper->>DB : 执行DELETE语句
DB-->>Mapper : 返回删除结果
Mapper-->>Service : 返回删除结果
Service-->>Controller : 返回成功
Controller-->>Client : 返回成功响应
```

**图源**
- [PackageTypeController.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/PackageTypeController.java)
- [PackageTypeService.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/service/packagetype/PackageTypeService.java#L40-L41)
- [PackageTypeMapper.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/dal/mysql/packagetype/PackageTypeMapper.java)

### 详细接口说明
#### 基础查询接口
| 接口名称 | 方法 | 路径 | 参数 | 返回值 |
|--------|------|------|------|--------|
| 获取包装方式列表 | GET | /api/package-type/list | 无 | List<PackageTypeDTO> |
| 根据ID获取包装方式 | GET | /api/package-type/get | id: Long | PackageTypeDTO |
| 批量获取包装方式 | POST | /api/package-type/list-by-ids | List<Long> | Map<Long, PackageTypeDTO> |
| 获取所有包装名称缓存 | GET | /api/package-type/all-name-cache | 无 | Map<Long, String> |

#### 管理接口
| 接口名称 | 方法 | 路径 | 参数 | 返回值 |
|--------|------|------|------|--------|
| 创建包装方式 | POST | /api/package-type/create | PackageTypeSaveReqVO | Long (ID) |
| 更新包装方式 | POST | /api/package-type/update | PackageTypeSaveReqVO | void |
| 删除包装方式 | DELETE | /api/package-type/delete | id: Long | void |
| 分页查询包装方式 | GET | /api/package-type/page | PackageTypePageReqVO | PageResult<PackageTypeRespVO> |

#### 附加功能接口
| 接口名称 | 方法 | 路径 | 参数 | 返回值 |
|--------|------|------|------|--------|
| 导出包装方式Excel | GET | /api/package-type/export-excel | PackageTypePageReqVO | void |
| 获取简单列表 | GET | /api/package-type/simple-list | PackageTypeSimplePageReqVO | List<PackageTypeRespVO> |
| 根据流程实例ID获取包装方式 | GET | /api/package-type/get-by-process | processInstanceId: String | PackageTypeRespVO |

**本节来源**
- [PackageTypeApi.java](file://eplus-module-pms/eplus-module-pms-api/src/main/java/com/syj/eplus/module/pms/api/packageType/PackageTypeApi.java#L9-L22)
- [PackageTypeService.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/service/packagetype/PackageTypeService.java#L18-L106)
- [PackageTypeController.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/PackageTypeController.java)

## 应用场景
包装方式在企业的多个业务场景中都有广泛应用，主要包括采购、物流、仓储等环节。

### 采购环节应用
在采购过程中，包装方式作为采购合同和采购计划的重要属性，影响着采购成本和物流安排。供应商报价、采购合同等单据中都需要明确包装方式信息。

```mermaid
flowchart TD
A[供应商报价] --> B[采购计划]
B --> C[采购合同]
C --> D[采购订单]
subgraph 包装方式信息
E[包装方式编号]
F[包装方式名称]
G[包装规格]
H[毛重]
I[净重]
J[体积]
end
E --> A
F --> A
G --> A
H --> A
I --> A
J --> A
E --> B
F --> B
G --> B
H --> B
I --> B
J --> B
E --> C
F --> C
G --> C
H --> C
I --> C
J --> C
```

**图源**
- [V1_0_0_145__供应商报价修改package_type类型.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_145__供应商报价修改package_type类型.java#L19-L27)
- [V1_0_0_186__供应商报价修改package_type类型.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_186__供应商报价修改package_type类型.java#L19-L27)

### 物流环节应用
在物流管理中，包装方式直接影响出运计划的制定和执行。不同的包装方式对应不同的运输要求和成本计算。

```mermaid
flowchart TD
A[出运计划] --> B[装箱单]
B --> C[提单]
C --> D[报关单]
subgraph 包装方式信息
E[包装方式编号]
F[包装方式名称]
G[包装规格]
H[毛重]
I[净重]
J[体积]
end
E --> A
F --> A
G --> A
H --> A
I --> A
J --> A
E --> B
F --> B
G --> B
H --> B
I --> B
J --> B
E --> C
F --> C
G --> C
H --> C
I --> C
J --> C
E --> D
F --> D
G --> D
H --> D
I --> D
J --> D
```

**图源**
- [V1_0_0_145__供应商报价修改package_type类型.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_145__供应商报价修改package_type类型.java#L23-L27)
- [V1_0_0_186__供应商报价修改package_type类型.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_186__供应商报价修改package_type类型.java#L23-L27)

### 仓储环节应用
在仓储管理中，包装方式影响着库存管理和仓库布局。不同的包装方式需要不同的存储条件和空间规划。

```mermaid
flowchart TD
A[入库单] --> B[库存记录]
B --> C[出库单]
C --> D[库存盘点]
subgraph 包装方式信息
E[包装方式编号]
F[包装方式名称]
G[包装规格]
H[毛重]
I[净重]
J[体积]
end
E --> A
F --> A
G --> A
H --> A
I --> A
J --> A
E --> B
F --> B
G --> B
H --> B
I --> B
J --> B
E --> C
F --> C
G --> C
H --> C
I --> C
J --> C
E --> D
F --> D
G --> D
H --> D
I --> D
J --> D
```

**图源**
- [V1_0_0_145__供应商报价修改package_type类型.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_145__供应商报价修改package_type类型.java#L24-L27)
- [V1_0_0_186__供应商报价修改package_type类型.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_186__供应商报价修改package_type类型.java#L24-L27)

**本节来源**
- [V1_0_0_145__供应商报价修改package_type类型.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_145__供应商报价修改package_type类型.java#L15-L27)
- [V1_0_0_186__供应商报价修改package_type类型.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_186__供应商报价修改package_type类型.java#L15-L27)
- [V1_0_0_323__包装方式字段类型修改外销合同增加送货地址佣金收否扣减总金额.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_323__包装方式字段类型修改外销合同增加送货地址佣金收否扣减总金额.java#L8-L15)

## 与SKU的关联关系
包装方式与SKU之间存在紧密的关联关系，这种关系在系统中通过多种方式体现。

### 数据模型关联
包装方式与SKU的关联主要体现在多个业务单据中，包括采购合同、销售合同、出运计划等。

```mermaid
erDiagram
pms_package_type ||--o{ scm_purchase_contract_item : "包含"
pms_package_type ||--o{ sms_sale_contract_item : "包含"
pms_package_type ||--o{ dms_shipment_plan_item : "包含"
pms_package_type ||--o{ dms_shipment_item : "包含"
pms_package_type ||--o{ dms_commodity_inspection_item : "包含"
pms_package_type ||--o{ dms_declaration_item : "包含"
scm_purchase_contract_item {
bigint id PK
bigint sku_id FK
bigint package_type_id FK
decimal quantity
}
sms_sale_contract_item {
bigint id PK
bigint sku_id FK
bigint package_type_id FK
decimal quantity
}
dms_shipment_plan_item {
bigint id PK
bigint sku_id FK
bigint package_type_id FK
decimal quantity
}
dms_shipment_item {
bigint id PK
bigint sku_id FK
bigint package_type_id FK
decimal quantity
}
dms_commodity_inspection_item {
bigint id PK
bigint sku_id FK
varchar package_type FK
decimal quantity
}
dms_declaration_item {
bigint id PK
bigint sku_id FK
varchar package_type FK
decimal quantity
}
pms_package_type {
bigint id PK
varchar code
varchar name
varchar nameEng
}
```

**图源**
- [V1_0_0_145__供应商报价修改package_type类型.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_145__供应商报价修改package_type类型.java#L21-L27)
- [V1_0_0_186__供应商报价修改package_type类型.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_186__供应商报价修改package_type类型.java#L21-L27)
- [V1_0_0_323__包装方式字段类型修改外销合同增加送货地址佣金收否扣减总金额.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_323__包装方式字段类型修改外销合同增加送货地址佣金收否扣减总金额.java#L12-L15)

### 业务逻辑关联
包装方式与SKU的关联不仅体现在数据模型上，还体现在业务处理流程中。

```mermaid
sequenceDiagram
participant Client as "客户端"
participant SaleContract as "销售合同"
participant SKU as "SKU服务"
participant PackageType as "包装方式服务"
participant Shipment as "出运计划"
Client->>SaleContract : 创建销售合同
SaleContract->>SKU : 获取SKU信息
SKU-->>SaleContract : 返回SKU信息
SaleContract->>PackageType : 获取包装方式信息
PackageType-->>SaleContract : 返回包装方式信息
SaleContract->>SaleContract : 验证SKU与包装方式匹配
SaleContract-->>Client : 返回创建结果
Client->>Shipment : 创建出运计划
Shipment->>SaleContract : 获取销售合同信息
SaleContract-->>Shipment : 返回销售合同信息
Shipment->>PackageType : 验证包装方式有效性
PackageType-->>Shipment : 返回验证结果
Shipment-->>Client : 返回创建结果
```

**图源**
- [PackageTypeApi.java](file://eplus-module-pms/eplus-module-pms-api/src/main/java/com/syj/eplus/module/pms/api/packageType/PackageTypeApi.java)
- [PackageTypeApiImpl.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/api/PackageTypeApiImpl.java)
- [SaleContractServiceImpl.java](file://eplus-module-sms/eplus-module-sms-biz/src/main/java/com/syj/eplus/module/sms/service/salecontract/SaleContractServiceImpl.java)

**本节来源**
- [V1_0_0_145__供应商报价修改package_type类型.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_145__供应商报价修改package_type类型.java#L19-L27)
- [V1_0_0_186__供应商报价修改package_type类型.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_186__供应商报价修改package_type类型.java#L19-L27)
- [V1_0_0_323__包装方式字段类型修改外销合同增加送货地址佣金收否扣减总金额.java](file://eplus-flyway/src/main/java/db/migration/common/V1_0_0_323__包装方式字段类型修改外销合同增加送货地址佣金收否扣减总金额.java#L12-L15)
- [PackageTypeApi.java](file://eplus-module-pms/eplus-module-pms-api/src/main/java/com/syj/eplus/module/pms/api/packageType/PackageTypeApi.java#L1-L23)

## 数据导入导出功能
系统提供了包装方式数据的导入导出功能，方便批量管理和数据迁移。

### 数据导出功能
系统支持将包装方式数据导出为Excel文件，便于数据分析和存档。

```mermaid
flowchart TD
A[用户请求导出] --> B{权限校验}
B --> |通过| C[构建查询条件]
B --> |拒绝| D[返回错误]
C --> E[调用服务层查询]
E --> F[获取包装方式数据]
F --> G[转换为Excel格式]
G --> H[设置响应头]
H --> I[写入输出流]
I --> J[返回Excel文件]
```

**图源**
- [PackageTypeController.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/PackageTypeController.java)
- [PackageTypeRespVO.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/vo/PackageTypeRespVO.java)

### 数据导入功能
虽然代码中未直接体现导入功能，但根据系统设计模式，可以推断存在类似的数据导入机制。

```mermaid
flowchart TD
A[用户上传Excel文件] --> B{文件格式校验}
B --> |有效| C[解析Excel数据]
B --> |无效| D[返回错误]
C --> E{数据校验}
E --> |通过| F[转换为实体对象]
E --> |失败| G[返回校验错误]
F --> H[批量保存到数据库]
H --> I[返回导入结果]
```

**本节来源**
- [PackageTypeController.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/PackageTypeController.java)
- [PackageTypeRespVO.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/vo/PackageTypeRespVO.java#L1-L34)

## 数据校验规则
包装方式管理实施了严格的数据校验规则，确保数据的完整性和一致性。

### 字段级校验规则
| 字段 | 校验规则 | 错误信息 |
|------|---------|---------|
| 名称(name) | 必填 | 包装方式名称不能为空 |
| 英文名称(nameEng) | 必填 | 包装方式英文名称不能为空 |
| 编号(code) | 唯一性校验 | 包装方式编号已存在 |

### 业务级校验规则
1. **唯一性校验**: 包装方式编号在系统中必须唯一
2. **状态校验**: 已删除的包装方式不能被引用
3. **引用校验**: 正在被使用的包装方式不能被删除
4. **权限校验**: 只有授权用户才能创建、修改或删除包装方式

### 校验实现方式
系统采用多层次的校验机制：

```mermaid
flowchart TD
A[前端校验] --> B[API参数校验]
B --> C[服务层业务校验]
C --> D[数据库约束校验]
subgraph 前端校验
E[必填字段检查]
F[格式检查]
G[实时验证]
end
subgraph API参数校验
H[@NotEmpty注解]
I[@NotNull注解]
J[JSR-303校验]
end
subgraph 服务层业务校验
K[唯一性检查]
L[状态检查]
M[引用检查]
end
subgraph 数据库约束校验
N[主键约束]
O[唯一索引]
P[外键约束]
end
E --> A
F --> A
G --> A
H --> B
I --> B
J --> B
K --> C
L --> C
M --> C
N --> D
O --> D
P --> D
```

**图源**
- [PackageTypeSaveReqVO.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/vo/PackageTypeSaveReqVO.java#L19-L24)
- [PackageTypeService.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/service/packagetype/PackageTypeService.java)

**本节来源**
- [PackageTypeSaveReqVO.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/controller/admin/packagetype/vo/PackageTypeSaveReqVO.java#L1-L28)
- [PackageTypeService.java](file://eplus-module-pms/eplus-module-pms-biz/src/main/java/com/syj/eplus/module/pms/service/packagetype/PackageTypeService.java#L1-L106)

## 结论
包装方式管理是企业供应链管理系统中的关键组成部分，通过统一的包装方式定义、维护和使用，实现了采购、物流、仓储等环节的标准化管理。系统采用分层架构设计，提供了完整的API接口，支持增删改查等基本操作以及数据导入导出功能。包装方式与SKU的关联关系贯穿于多个业务场景，在出运计划、报关单据等应用中发挥重要作用。严格的校验规则确保了数据的完整性和一致性。未来可以考虑扩展包装方式的属性，如增加毛重、净重、体积等物理特性，以满足更复杂的业务需求。