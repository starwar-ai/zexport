# ePlus 企业管理系统 - 数据库模型文档

## 1. 概述

### 1.1 项目信息
- **项目名称**: ePlus 企业管理系统
- **技术栈**: Java + Spring Boot + MyBatis Plus
- **数据库支持**: MySQL、Oracle、PostgreSQL、Kingbase、DB2、H2

### 1.2 设计规范
- 所有表继承自 `BaseDO`，包含通用字段：`id`, `creator`, `create_time`, `updater`, `update_time`, `deleted`, `tenant_id`
- 使用 MyBatis Plus 注解进行 ORM 映射
- 复杂类型字段使用 JSON 存储，配合 TypeHandler 处理
- 支持数据权限控制（`effectRangeList` 字段）
- 支持变更追踪（`changeFlag`, `changeStatus`, `ver` 字段）

---

## 2. 模块概览

| 模块代码 | 模块名称 | 表前缀 | 表数量 | 说明 |
|---------|---------|--------|--------|-----|
| CRM | 客户关系管理 | crm_ | 8 | 客户资料、联系人、银行账户等 |
| SCM | 供应链管理 | scm_ | 17 | 供应商、采购合同、付款申请等 |
| SMS | 销售管理 | sms_ | 14 | 外销合同、报价单等 |
| WMS | 仓储管理 | wms_ | 14 | 仓库、库存、出入库单据等 |
| PMS | 产品管理 | pms_ | 8 | SPU、SKU、品牌、分类等 |
| DMS | 单据管理 | dms_ | 15 | 出运单、报关单、发货计划等 |
| OA | 办公自动化 | oa_ | 15 | 报销、借款、出差申请等 |
| FMS | 财务管理 | fms_ | 5 | 收款、付款、银行登记等 |
| MMS | 制造管理 | mms_ | 3 | 加工单、制造SKU等 |
| DOC | 单据定义 | doc_ | 5 | 单据类型、单据关联规则等 |
| INFRA | 基础设施 | system_ | 11 | 公司、版本、汇率等 |

---

## 3. CRM - 客户关系管理模块

### 3.1 crm_cust - 客户资料表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 客户编号 | 唯一 |
| name | VARCHAR(255) | 企业名称 | |
| shortname | VARCHAR(128) | 简称 | |
| country_id | BIGINT | 国家编码 | 关联国家表 |
| homepage | VARCHAR(255) | 官网 | |
| email | VARCHAR(128) | 电子邮件 | |
| customer_types | JSON | 客户类型 | 电商/进口商/零售商等 |
| stage_type | INT | 客户阶段 | 1-潜在 2-正式 3-退休 |
| currency_list | JSON | 币种列表 | |
| transport_type | INT | 运输方式 | 1-海运 2-陆运 3-空运 |
| address | VARCHAR(512) | 营业地址 | |
| phone | VARCHAR(32) | 联系电话 | |
| abroad_flag | INT | 国外客户标志 | 0-否 1-是 |
| source_type | INT | 客户来源 | |
| credit_flag | INT | 启用信用额度 | 0-不启用 1-启用 |
| credit_limit | JSON | 信用额度 | JsonAmount类型 |
| zxbquota_flag | INT | 是否中信保 | 0-否 1-是 |
| settlement_term_type | VARCHAR(32) | 价格条款 | CIF/FOB/CIP/DDP等 |
| invoice_header | VARCHAR(255) | 开票抬头 | |
| tax_rate | DECIMAL(10,4) | 税率 | |
| agent_flag | INT | 是否代理 | 0-否 1-是 |
| audit_status | INT | 审核状态 | |
| address_shipping | JSON | 寄件地址列表 | |
| remark | TEXT | 备注 | |
| manager_ids | JSON | 业务员ID列表 | |
| manager_list | JSON | 业务员信息列表 | |
| convert_flag | INT | 转正标识 | 0-否 1-是 |
| convert_time | DATETIME | 转正时间 | |
| enable_flag | INT | 是否启用 | 0-否 1-是 |
| annex | JSON | 附件列表 | |
| picture | JSON | 图片列表 | |
| cust_link_code | JSON | 关联客户编码 | |
| change_flag | INT | 是否变更 | |
| change_status | INT | 变更状态 | |
| change_deleted | INT | 变更是否删除 | |
| ver | INT | 版本号 | |
| internal_flag | INT | 内部企业标识 | 0-否 1-是 |
| internal_company_id | BIGINT | 内部企业主键 | |
| main_mark | TEXT | 正面唛头 | |
| side_mark | TEXT | 侧面唛头 | |
| model_key | VARCHAR(128) | 模型键 | |
| effect_range_list | JSON | 数据权限范围 | |
| exms_exhibition_id | BIGINT | 展会ID | |
| exms_event_category_id | BIGINT | 展会系列 | |
| receive_person | VARCHAR(255) | 收货人 | |
| notify_person | VARCHAR(255) | 通知人 | |

### 3.2 crm_cust_poc - 客户联系人表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| cust_id | BIGINT | 客户主键 | 关联crm_cust |
| poc_name | VARCHAR(64) | 联系人姓名 | |
| phone | VARCHAR(32) | 联系电话 | |
| email | VARCHAR(128) | 邮箱 | |
| position | VARCHAR(64) | 职位 | |
| remark | VARCHAR(512) | 备注 | |

### 3.3 crm_cust_bankaccount - 客户银行账户表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| cust_id | BIGINT | 客户主键 | 关联crm_cust |
| bank_code | VARCHAR(64) | 银行代码 | |
| account_no | VARCHAR(64) | 账户号 | |
| account_name | VARCHAR(128) | 账户名称 | |
| bank_name | VARCHAR(128) | 银行名称 | |
| bank_address | VARCHAR(256) | 银行地址 | |

### 3.4 crm_cust_settlement - 客户结算方式表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| cust_id | BIGINT | 客户主键 | 关联crm_cust |
| settlement_type | INT | 结算方式 | |
| settlement_name | VARCHAR(64) | 结算方式名称 | |

### 3.5 crm_collection_account - 客户收款账户表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| cust_id | BIGINT | 客户主键 | 关联crm_cust |
| account_no | VARCHAR(64) | 账户号 | |
| bank_code | VARCHAR(64) | 银行代码 | |

### 3.6 crm_category - 客户分类表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| name | VARCHAR(64) | 分类名称 | |
| code | VARCHAR(32) | 分类编码 | |

### 3.7 crm_mark - 客户唛头表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| cust_id | BIGINT | 客户主键 | 关联crm_cust |
| mark_content | TEXT | 唛头内容 | |

---

## 4. SCM - 供应链管理模块

### 4.1 scm_vender - 供应商信息表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 供应商编码 | 唯一 |
| name | VARCHAR(255) | 供应商名称 | |
| name_eng | VARCHAR(255) | 英文名称 | |
| name_short | VARCHAR(128) | 简称 | |
| registered_capital | VARCHAR(64) | 注册资本 | |
| legal_person | VARCHAR(64) | 法定代表人 | |
| business_scope | JSON | 主营业务 | Long列表 |
| vender_link_code | JSON | 应付供应商编码 | String列表 |
| company_area_id | INT | 公司所在地区 | |
| factory_area_id | INT | 工厂所在地区 | |
| factory_address | VARCHAR(512) | 工厂地址 | |
| vender_type | INT | 供应商类型 | |
| vender_level | INT | 供应商级别 | |
| company_address | VARCHAR(512) | 公司地址 | |
| license_no | VARCHAR(64) | 营业执照号 | |
| phone | VARCHAR(32) | 企业电话 | |
| abroad_flag | INT | 是否境外供应商 | 0-否 1-是 |
| country_id | BIGINT | 国家编号 | |
| audit_status | INT | 审核状态 | |
| buyer_ids | JSON | 采购员ID列表 | |
| buyer_list | JSON | 采购员信息列表 | |
| remark | TEXT | 备注 | |
| delivery_area_id | INT | 快递所在城市 | |
| delivery_address | VARCHAR(512) | 快递地址 | |
| stage_type | INT | 供应商阶段 | |
| convert_flag | INT | 转正标识 | |
| convert_time | DATETIME | 转正时间 | |
| enable_flag | INT | 是否启用 | 0-否 1-是 |
| annex | JSON | 附件列表 | |
| fax | VARCHAR(32) | 传真 | |
| qualification_ids | JSON | 资质ID列表 | |
| change_flag | INT | 是否变更 | |
| change_status | INT | 变更状态 | |
| change_deleted | INT | 变更是否删除 | |
| ver | INT | 版本号 | |
| administration_vender_type | INT | 行政供应商类型 | |
| internal_flag | INT | 内部企业标识 | 0-否 1-是 |
| internal_company_id | BIGINT | 内部企业主键 | |
| model_key | VARCHAR(128) | 模型键 | |
| effect_range_list | JSON | 数据权限范围 | |
| tax_msg | JSON | 税务信息 | |

### 4.2 scm_vender_poc - 供应商联系人表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| vender_id | BIGINT | 供应商主键 | 关联scm_vender |
| poc_name | VARCHAR(64) | 联系人姓名 | |
| phone | VARCHAR(32) | 联系电话 | |
| email | VARCHAR(128) | 邮箱 | |

### 4.3 scm_vender_bankaccount - 供应商银行账户表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| vender_id | BIGINT | 供应商主键 | 关联scm_vender |
| bank_code | VARCHAR(64) | 银行代码 | |
| account_no | VARCHAR(64) | 账户号 | |
| account_name | VARCHAR(128) | 账户名称 | |

### 4.4 scm_purchase_contract - 采购合同表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 采购合同编号 | 唯一 |
| ver | INT | 版本号 | |
| confirm_flag | INT | 确认状态 | |
| audit_status | INT | 审核状态 | |
| contract_status | INT | 合同状态 | |
| total_amount | JSON | 采购总金额 | JsonAmount类型 |
| total_quantity | INT | 采购总数量 | |
| print_flag | INT | 打印状态 | |
| print_times | INT | 打印次数 | |
| prepay_status | INT | 预付款状态 | |
| prepay_amount | JSON | 预付款金额 | |
| pay_status | INT | 付款状态 | |
| payed_amount | JSON | 已付款金额 | |
| invoice_status | INT | 开票状态 | |
| convert_notice_flag | INT | 转入库通知单标识 | |
| invoiced_amount | DECIMAL(18,2) | 已开票金额 | |
| manager | JSON | 跟单员 | UserDept类型 |
| purchase_user_id | BIGINT | 采购员ID | |
| purchase_user_name | VARCHAR(64) | 采购员名称 | |
| purchase_user_dept_id | BIGINT | 采购员部门ID | |
| purchase_user_dept_name | VARCHAR(128) | 采购员部门名称 | |
| cust_id | BIGINT | 客户主键 | |
| vender_id | BIGINT | 供应商主键 | 关联scm_vender |
| stock_id | BIGINT | 仓库主键 | |
| stock_code | VARCHAR(64) | 仓库编码 | |
| vender_code | VARCHAR(64) | 供应商编码 | |
| vender_name | VARCHAR(255) | 供应商名称 | |
| cust_code | VARCHAR(64) | 客户编码 | |
| stock_name | VARCHAR(128) | 仓库名称 | |
| purchase_plan_id | BIGINT | 采购计划ID | |
| purchase_plan_code | VARCHAR(64) | 采购计划编号 | |
| sale_contract_id | BIGINT | 销售合同ID | |
| sale_contract_code | VARCHAR(64) | 销售合同编号 | |
| remark | TEXT | 备注 | |
| annex | JSON | 附件列表 | |
| company_id | BIGINT | 采购主体 | |
| purchase_time | DATETIME | 采购时间 | |
| payment_id | BIGINT | 付款方式ID | |
| payment_name | VARCHAR(64) | 付款方式名称 | |
| port_id | BIGINT | 目的口岸 | |
| freight | JSON | 运费 | |
| other_cost | JSON | 其他费用 | |
| delivery_date | DATETIME | 交货日期 | |
| init_delivery_date | DATETIME | 初始交货日期 | |
| deal_time | DATETIME | 处理时间 | |
| finish_time | DATETIME | 结案时间 | |
| done_time | DATETIME | 完成时间 | |
| sign_back_time | DATETIME | 回签时间 | |
| order_time | DATETIME | 下单时间 | |
| sign_back_flag | INT | 回签标识 | |
| tax_type | INT | 发票类型 | |
| equally_type | INT | 分摊方式 | |
| auxiliary_flag | INT | 是否辅料采购 | |
| re_purchase_flag | INT | 重构标记 | |
| re_purchase_desc | VARCHAR(512) | 重构原因 | |
| produce_completed | INT | 生产完成标识 | 0-否 1-是 |
| payment_vender_id | BIGINT | 应付供应商主键 | |
| payment_vender_code | VARCHAR(64) | 应付供应商编号 | |
| payment_vender_name | VARCHAR(255) | 应付供应商名称 | |
| invoiced_quantity | DECIMAL(18,4) | 已开票数量 | |
| currency | VARCHAR(16) | 币种 | |
| invoiced_currency | VARCHAR(16) | 登票币种 | |
| sign_back_desc | VARCHAR(512) | 回签描述 | |
| change_status | INT | 变更状态 | |
| auto_flag | INT | 自动生成标识 | 0-否 1-是 |
| link_code_list | JSON | 链路编号列表 | |
| design_draft_list | JSON | 出片文件列表 | |
| sign_back_annex_list | JSON | 回签附件列表 | |
| place_order_flag | INT | 下单标记 | |
| place_order_time | DATETIME | 下单时间 | |
| plan_source_type | INT | 采购计划来源方式 | |
| check_status | INT | 验货状态 | 0-未验货 1-部分通过 2-全部通过 |
| repeat_flag | INT | 翻单标记 | |
| vender_poc | JSON | 供应商联系人 | |
| sales | JSON | 销售员 | UserDept类型 |
| effect_range_list | JSON | 数据权限范围 | |
| box_with_color | INT | 箱带颜色 | |
| sample_count | INT | 样品套数 | |
| gen_contract_unique_code | VARCHAR(64) | 内部生成编号 | |
| delivery_address | VARCHAR(512) | 送货地址 | |
| auxiliary_payment_flag | INT | 包材转对公标记 | |
| minimum_base_quantity | DECIMAL(10,4) | 最低备品比例 | |
| restocking_deadline | INT | 乙方补货时限 | |
| auxiliary_purchase_user | JSON | 辅料采购员列表 | |
| auxiliary_sales | JSON | 辅料销售员列表 | |
| auxiliary_manager | JSON | 辅料跟单员列表 | |
| process_instance_id | VARCHAR(64) | 流程实例ID | |
| sync_code | BIGINT | 同步标记 | |
| total_amount_rmb | JSON | 采购总额人民币 | |
| tax_rate | DECIMAL(10,4) | 税率 | |

### 4.5 scm_purchase_contract_item - 采购合同明细表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| purchase_contract_id | BIGINT | 采购合同主键 | 关联scm_purchase_contract |
| sku_id | BIGINT | 产品主键 | |
| sku_code | VARCHAR(64) | 产品编码 | |
| sku_name | VARCHAR(255) | 产品名称 | |
| quantity | INT | 数量 | |
| price | JSON | 单价 | JsonAmount类型 |
| amount | JSON | 金额 | |
| remark | VARCHAR(512) | 备注 | |

### 4.6 scm_purchase_plan - 采购计划表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 计划编号 | |
| sale_contract_id | BIGINT | 销售合同ID | |
| sale_contract_code | VARCHAR(64) | 销售合同编号 | |
| status | INT | 状态 | |

### 4.7 scm_purchase_plan_item - 采购计划明细表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| purchase_plan_id | BIGINT | 采购计划主键 | 关联scm_purchase_plan |
| sku_id | BIGINT | 产品主键 | |
| quantity | INT | 数量 | |

### 4.8 scm_payment_apply - 付款申请表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 申请单号 | |
| vender_id | BIGINT | 供应商主键 | |
| total_amount | JSON | 申请总金额 | |
| audit_status | INT | 审核状态 | |

### 4.9 scm_payment_apply_item - 付款申请明细表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| payment_apply_id | BIGINT | 付款申请主键 | |
| purchase_contract_id | BIGINT | 采购合同主键 | |
| amount | JSON | 金额 | |

### 4.10 scm_qualification - 供应商资质表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| name | VARCHAR(128) | 资质名称 | |
| code | VARCHAR(64) | 资质编码 | |

### 4.11 scm_quote_item - 报价单表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| vender_id | BIGINT | 供应商主键 | |
| sku_id | BIGINT | 产品主键 | |
| price | JSON | 报价 | |

### 4.12 scm_invoicing_notices - 开票通知表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 通知单号 | |
| vender_id | BIGINT | 供应商主键 | |

### 4.13 scm_concession_release - 让步放行表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 单号 | |
| purchase_contract_id | BIGINT | 采购合同主键 | |

---

## 5. SMS - 销售管理模块

### 5.1 sms_sale_contract - 外销合同表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 合同编号 | 唯一 |
| confirm_flag | INT | 确认状态 | |
| company_id | BIGINT | 内部法人单位 | |
| company_name | VARCHAR(255) | 内部法人单位名称 | |
| company_path | JSON | 订单路径 | JsonCompanyPath类型 |
| cust_id | BIGINT | 客户主键 | 关联crm_cust |
| cust_code | VARCHAR(64) | 客户编号 | |
| cust_name | VARCHAR(255) | 客户名称 | |
| internal_cust_id | BIGINT | 内部客户主键 | |
| internal_cust_code | VARCHAR(64) | 内部客户编号 | |
| internal_cust_name | VARCHAR(255) | 内部客户名称 | |
| currency | VARCHAR(16) | 交易币别 | |
| settlement_term_type | VARCHAR(32) | 价格条款 | |
| settlement_id | BIGINT | 收款方式主键 | |
| settlement_name | VARCHAR(64) | 收款方式名称 | |
| cust_country_id | BIGINT | 客户国别主键 | |
| cust_country_name | VARCHAR(64) | 客户国别名称 | |
| cust_po | VARCHAR(64) | 客户合同号 | |
| agent_flag | INT | 是否代理 | 0-否 1-是 |
| collected_cust_id | BIGINT | 应收客户主键 | |
| collected_cust_code | VARCHAR(64) | 应收客户编号 | |
| collected_cust_name | VARCHAR(255) | 应收客户名称 | |
| receive_cust_id | BIGINT | 收货客户主键 | |
| receive_cust_code | VARCHAR(64) | 收货客户编号 | |
| receive_cust_name | VARCHAR(255) | 收货客户名称 | |
| sales | JSON | 销售人员 | UserDept类型 |
| annex | JSON | 附件列表 | |
| input_date | DATETIME | 录入日期 | |
| trade_country_id | BIGINT | 贸易国别主键 | |
| trade_country_name | VARCHAR(64) | 贸易国别名称 | |
| trade_country_area | VARCHAR(64) | 贸易国区域 | |
| departure_country_id | BIGINT | 出运国主键 | |
| departure_country_name | VARCHAR(64) | 出运国名称 | |
| departure_country_area | VARCHAR(64) | 出运国区域 | |
| departure_port_id | BIGINT | 出运口岸主键 | |
| departure_port_name | VARCHAR(64) | 出运口岸名称 | |
| destination_port_id | BIGINT | 目的口岸主键 | |
| destination_port_name | VARCHAR(64) | 目的口岸名称 | |
| transport_type | INT | 运输方式 | |
| cust_delivery_date | DATETIME | 客户交期 | |
| twenty_foot_cabinet_num | INT | 20尺柜数量 | |
| forty_foot_cabinet_num | INT | 40尺柜数量 | |
| forty_foot_container_num | INT | 40尺高柜数量 | |
| bulk_handling_volume | DECIMAL(18,4) | 散货体积 | |
| trailer_fee | JSON | 拖柜费 | JsonAmount类型 |
| estimated_total_freight | JSON | 预估总运费 | |
| booking_flag | INT | 是否订舱 | 0-否 1-是 |
| commission | JSON | 佣金 | |
| platform_fee | JSON | 平台费 | |
| insurance_fee | JSON | 保险费 | |
| lump_sum_fee | JSON | 包干费 | |
| sinosure_fee | JSON | 中信保费用 | |
| addition_amount | JSON | 加项金额 | |
| deduction_amount | JSON | 减项金额 | |
| inspection_fee | JSON | 验货费用 | |
| estimated_packing_materials | JSON | 预计包材合计 | |
| accessories_purchase_total | JSON | 配件采购合计 | |
| total_boxes | INT | 箱数合计 | |
| total_grossweight | JSON | 毛重合计 | JsonWeight类型 |
| total_weight | JSON | 净重合计 | |
| total_volume | DECIMAL(18,4) | 体积合计 | |
| total_goods_value | JSON | 货值合计 | |
| total_purchase | JSON | 采购合计 | JsonAmount列表 |
| total_vat_refund | JSON | 退税合计 | |
| total_quantity | INT | 数量合计 | |
| order_gross_profit | JSON | 订单毛利 | |
| gross_profit_margin | DECIMAL(10,4) | 毛利率 | |
| receivable_exchange | JSON | 应收汇款 | |
| sale_type | INT | 销售合同类型 | |
| audit_status | INT | 审核状态 | |
| convert_purchase_flag | INT | 转采购计划标记 | |
| convert_purchase_time | DATETIME | 转采购计划时间 | |
| process_instance_id | VARCHAR(64) | 流程ID | |
| sign_back_user | JSON | 回签人 | UserDept类型 |
| sign_back_date | DATETIME | 回签日期 | |
| status | INT | 状态 | |
| change_status | INT | 变更状态 | |
| auto_flag | INT | 自动生成标识 | 0-否 1-是 |
| link_code_list | JSON | 订单链路编号 | |
| design_draft_list | JSON | 设计稿列表 | |
| sign_back_annex | JSON | 回签附件列表 | |
| sign_back_flag | INT | 回签标记 | |
| sign_back_desc | VARCHAR(512) | 回签描述 | |
| collection_account_id | BIGINT | 客户收款账号ID | |
| collection_account_bank_code | VARCHAR(64) | 客户收款账号 | |
| exchange_rate | DECIMAL(18,6) | 创建时汇率 | |
| source_contract_id | BIGINT | 销售合同主键(来源) | |
| source_contract_code | VARCHAR(64) | 销售合同编码(来源) | |
| delivery_address | VARCHAR(512) | 送货地址 | |
| print_flag | INT | 打印状态 | |
| print_times | INT | 打印次数 | |
| total_amount | JSON | 销售总金额 | |
| total_amount_usd | JSON | 销售总金额USD | |
| gen_contract_unique_code | VARCHAR(64) | 内部生成编号 | |
| purchase_user_list | JSON | 采购员列表 | |
| usd_rate | DECIMAL(18,6) | 美元汇率 | |
| sale_contract_date | DATETIME | 销售合同日期 | |
| sync_code | BIGINT | 同步标记 | |
| total_stock_cost | JSON | 库存成本合计 | |
| collection_total | JSON | 收款合计 | |
| manager | JSON | 跟单员 | UserDept类型 |
| total_amount_this_currency | JSON | 销售总金额(原币种) | |
| remark | TEXT | 备注 | |

### 5.2 sms_sale_contract_item - 外销合同明细表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| sale_contract_id | BIGINT | 外销合同主键 | 关联sms_sale_contract |
| sku_id | BIGINT | 产品主键 | |
| sku_code | VARCHAR(64) | 产品编码 | |
| sku_name | VARCHAR(255) | 产品名称 | |
| quantity | INT | 数量 | |
| price | JSON | 单价 | |
| amount | JSON | 金额 | |

### 5.3 sms_quotation - 报价单表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 报价单号 | |
| cust_id | BIGINT | 客户主键 | |
| status | INT | 状态 | |

### 5.4 sms_quotation_item - 报价单明细表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| quotation_id | BIGINT | 报价单主键 | |
| sku_id | BIGINT | 产品主键 | |
| quantity | INT | 数量 | |
| price | JSON | 单价 | |

### 5.5 sms_other_fee - 其他费用表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| sale_contract_id | BIGINT | 外销合同主键 | |
| fee_type | INT | 费用类型 | |
| amount | JSON | 金额 | |

### 5.6 sms_sale_auxiliary_allocation - 销售辅助分配表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| sale_contract_id | BIGINT | 外销合同主键 | |
| allocation | JSON | 分配信息 | |

### 5.7 sms_collection_plan - 收款计划表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| sale_contract_id | BIGINT | 外销合同主键 | |
| plan_amount | JSON | 计划金额 | |
| plan_date | DATETIME | 计划日期 | |

### 5.8 sms_add_sub_item - 加减项表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| sale_contract_id | BIGINT | 外销合同主键 | |
| item_type | INT | 项目类型 | 1-加项 2-减项 |
| amount | JSON | 金额 | |

---

## 6. WMS - 仓储管理模块

### 6.1 wms_warehouse - 仓库表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 仓库编码 | 唯一 |
| name | VARCHAR(128) | 仓库名称 | |
| address | VARCHAR(512) | 仓库地址 | |
| enable_flag | INT | 启用标识 | 0-否 1-是 |
| manager_ids | JSON | 仓管主键列表 | |
| vender_flag | INT | 供应仓标识 | 0-否 1-是 |
| vender_code | VARCHAR(64) | 供应商编码 | |
| vender_name | VARCHAR(255) | 供应商名称 | |
| remark | VARCHAR(512) | 备注 | |
| default_flag | INT | 默认仓库标记 | |

### 6.2 wms_stock - 库存明细表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| batch_code | VARCHAR(64) | 批次号 | |
| bill_id | BIGINT | 单据主键 | |
| bill_item_id | BIGINT | 单据明细主键 | |
| sku_id | BIGINT | 产品主键 | |
| sku_code | VARCHAR(64) | 产品编码 | |
| sku_name | VARCHAR(255) | 产品中文名称 | |
| csku_code | VARCHAR(64) | 客户货号 | |
| basic_sku_code | VARCHAR(64) | 基础产品编号 | |
| own_brand_flag | INT | 自主品牌标识 | |
| cust_pro_flag | INT | 客户产品标识 | |
| receipt_time | DATETIME | 入库时间 | |
| producing_quantity | INT | 在制数量 | |
| init_quantity | INT | 入库数量 | |
| used_quantity | INT | 出库数量 | |
| lock_quantity | INT | 锁定数量 | |
| available_quantity | INT | 可用数量 | |
| qty_per_outerbox | INT | 外箱装量 | |
| qty_per_innerbox | INT | 内盒装量 | |
| price | JSON | 单价 | JsonAmount类型 |
| total_amount | JSON | 总金额 | |
| purchase_contract_id | BIGINT | 采购合同主键 | |
| purchase_contract_code | VARCHAR(64) | 采购合同号 | |
| sale_contract_id | BIGINT | 外销合同主键 | |
| sale_contract_code | VARCHAR(64) | 外销合同号 | |
| warehouse_id | BIGINT | 仓库主键 | 关联wms_warehouse |
| warehouse_name | VARCHAR(128) | 仓库名称 | |
| position | VARCHAR(128) | 存放位置 | |
| vender_id | BIGINT | 供应商主键 | |
| vender_code | VARCHAR(64) | 供应商编码 | |
| vender_name | VARCHAR(255) | 供应商名称 | |
| cust_id | BIGINT | 客户主键 | |
| cust_code | VARCHAR(64) | 客户编码 | |
| cust_name | VARCHAR(255) | 客户名称 | |
| cust_po | VARCHAR(64) | 客户PO号 | |
| total_volume | DECIMAL(18,4) | 总体积(cm³) | |
| total_weight | JSON | 总毛重 | JsonWeight类型 |
| pallet_volume | DECIMAL(18,4) | 单托体积(cm³) | |
| pallet_weight | JSON | 单托毛重 | |
| company_id | BIGINT | 归属公司主键 | |
| company_name | VARCHAR(255) | 归属公司名称 | |
| remark | VARCHAR(512) | 备注 | |
| remain_total_amount | JSON | 剩余总金额 | |
| diff_quantity | INT | 盘点数量 | |
| purchase_user | JSON | 采购员 | UserDept类型 |
| cabinet_quantity | INT | 拉柜数量 | |
| specification_list | JSON | 规格列表 | |
| split_box_flag | INT | 是否分箱 | |
| osku_code | VARCHAR(64) | 自营产品货号 | |

### 6.3 wms_bill - 出入库单据表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 单号 | |
| bill_type | INT | 入/出库类型 | 1-入库单 2-出库单 |
| bill_status | INT | 单据状态 | 1-未确认 2-已确认 3-作废 |
| notice_code | VARCHAR(64) | 入/出库通知单号 | |
| sale_contract_id | BIGINT | 销售合同主键 | |
| sale_contract_code | VARCHAR(64) | 销售合同号 | |
| bill_time | DATETIME | 入/出库时间 | |
| warehouse_id | BIGINT | 仓库主键 | |
| warehouse_name | VARCHAR(128) | 仓库名称 | |
| print_flag | INT | 打印状态 | 0-未打印 1-已打印 |
| print_times | INT | 打印次数 | |
| company_id | BIGINT | 归属公司主键 | |
| company_name | VARCHAR(255) | 归属公司名称 | |
| remark | VARCHAR(512) | 备注 | |
| sku_codes | VARCHAR(1024) | 产品编码 | |
| pictures | JSON | 图片列表 | |
| source_type | INT | 来源单类型 | |
| source_code | VARCHAR(64) | 来源单编号 | |
| source_id | BIGINT | 来源单主键 | |
| invoice_code | VARCHAR(64) | 出运发票号 | |
| gen_contract_unique_code | VARCHAR(64) | 内部生成编号 | |

### 6.4 wms_bill_item - 出入库单据明细表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| bill_id | BIGINT | 单据主键 | 关联wms_bill |
| sku_id | BIGINT | 产品主键 | |
| quantity | INT | 数量 | |
| price | JSON | 单价 | |

### 6.5 wms_stocktake - 盘点表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 盘点单号 | |
| warehouse_id | BIGINT | 仓库主键 | |
| status | INT | 状态 | |

### 6.6 wms_stocktake_item - 盘点明细表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| stocktake_id | BIGINT | 盘点主键 | |
| sku_id | BIGINT | 产品主键 | |
| quantity | INT | 盘点数量 | |

### 6.7 wms_adjustment - 库存调整表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 调整单号 | |
| status | INT | 状态 | |

### 6.8 wms_adjustment_item - 调整明细表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| adjustment_id | BIGINT | 调整主键 | |
| sku_id | BIGINT | 产品主键 | |
| quantity | INT | 调整数量 | |

### 6.9 wms_stock_lock - 库存锁定表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| stock_id | BIGINT | 库存主键 | 关联wms_stock |
| lock_quantity | INT | 锁定数量 | |

### 6.10 wms_stock_notice - 库存通知表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 通知单号 | |
| notice_type | INT | 通知类型 | |

### 6.11 wms_stock_notice_item - 通知明细表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| notice_id | BIGINT | 通知主键 | |
| sku_id | BIGINT | 产品主键 | |
| quantity | INT | 数量 | |

### 6.12 wms_transfer_order - 调拨单表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 调拨单号 | |
| source_warehouse_id | BIGINT | 源仓库主键 | |
| target_warehouse_id | BIGINT | 目标仓库主键 | |

---

## 7. PMS - 产品管理模块

### 7.1 pms_spu - 商品SPU表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| name | VARCHAR(255) | 名称 | |
| code | VARCHAR(64) | 编号 | 唯一 |
| barcode | VARCHAR(64) | 产品条码 | |
| name_eng | VARCHAR(255) | 英文名称 | |
| brand_id | BIGINT | 品牌编号 | 关联pms_brand |
| category_id | BIGINT | 商品分类 | 关联pms_category |
| unit_type | VARCHAR(32) | 计量单位 | |
| onshelf_flag | INT | 商品状态 | |
| audit_status | INT | 审核状态 | |
| description | TEXT | 商品说明 | |
| description_eng | TEXT | 商品说明英文 | |
| hs_code_id | BIGINT | 海关编码 | |
| own_brand_flag | INT | 是否自主品牌 | |
| spec | VARCHAR(255) | 产品规格 | |
| hs_code_var | INT | 海关编码版本 | |

### 7.2 pms_sku - 商品SKU表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| spu_id | BIGINT | SPU主键 | 关联pms_spu |
| name | VARCHAR(255) | 名称 | |
| name_eng | VARCHAR(255) | 英文名称 | |
| code | VARCHAR(64) | 商品编码 | 唯一 |
| barcode | VARCHAR(64) | 条码 | |
| cust_code | VARCHAR(64) | 客户编号 | |
| csku_code | VARCHAR(64) | 客户货号 | |
| osku_code | VARCHAR(64) | 自营产品货号 | |
| onshelf_flag | INT | 产品状态 | |
| description | TEXT | 产品说明 | |
| description_eng | TEXT | 产品说明英文 | |
| own_brand_flag | INT | 是否自主品牌 | |
| brand_id | BIGINT | 品牌ID | |
| category_id | BIGINT | 产品分类 | |
| hs_code_id | BIGINT | 海关编码ID | |
| source_flag | INT | 产品来源 | |
| sku_type | INT | 产品类型 | |
| material | VARCHAR(128) | 产品材质 | |
| measure_unit | INT | 计量单位 | |
| spec_length | DECIMAL(18,4) | 单品规格长 | |
| spec_width | DECIMAL(18,4) | 单品规格宽 | |
| spec_height | DECIMAL(18,4) | 单品规格高 | |
| single_netweight | JSON | 单品净重 | JsonWeight类型 |
| single_process_fee | DECIMAL(18,4) | 单位加工费 | |
| process_remark | VARCHAR(512) | 加工备注 | |
| price | JSON | 销售单价 | JsonAmount类型 |
| company_price | JSON | 公司定价 | |
| annex | JSON | 附件列表 | |
| picture | JSON | 图片列表 | |
| thumbnail | VARCHAR(512) | 缩略图 | |
| advantage_flag | INT | 是否优势产品 | |
| remark | VARCHAR(512) | 备注 | |
| cust_pro_flag | INT | 客户产品标识 | |
| source_id | BIGINT | 来源ID | |
| source_code | VARCHAR(64) | 来源编号 | |
| auto_create_flag | INT | 自动创建标识 | |
| auxiliary_sku_flag | INT | 是否通用辅料 | |
| auxiliary_material | INT | 辅料材质 | |
| commodity_inspection_flag | INT | 是否商检 | |
| process_instance_id | VARCHAR(64) | 流程实例ID | |
| old_data | JSON | 旧数据 | |
| basic_sku_code | VARCHAR(64) | 基础产品编号 | |
| declaration_name | VARCHAR(255) | 报关中文名称 | |
| customs_declaration_name_eng | VARCHAR(255) | 报关英文名称 | |
| agent_flag | INT | 是否代理 | |
| belonging_dept_id | BIGINT | 归属部门ID | |
| belonging_dept_name | VARCHAR(128) | 归属部门名称 | |
| change_flag | INT | 是否变更 | |
| change_status | INT | 变更状态 | |
| change_deleted | INT | 变更是否删除 | |
| ver | INT | 版本号 | |
| audit_status | INT | 审核状态 | |
| model_key | VARCHAR(128) | 模型键 | |
| effect_range_list | JSON | 数据权限范围 | |

### 7.3 pms_brand - 品牌表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| name | VARCHAR(64) | 品牌名称 | |
| code | VARCHAR(32) | 品牌编码 | |

### 7.4 pms_category - 产品分类表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| name | VARCHAR(64) | 分类名称 | |
| code | VARCHAR(32) | 分类编码 | |
| parent_id | BIGINT | 父级分类ID | |

### 7.5 pms_sku_bom - SKU物料清单表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| sku_id | BIGINT | 产品主键 | |
| component_sku_id | BIGINT | 组件产品主键 | |
| quantity | INT | 数量 | |

### 7.6 pms_sku_auxiliary - SKU辅助信息表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| sku_id | BIGINT | 产品主键 | |
| auxiliary_info | JSON | 辅助信息 | |

### 7.7 pms_hsdata - 海关编码表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| hs_code | VARCHAR(32) | 海关编码 | |
| description | VARCHAR(512) | 描述 | |

---

## 8. DMS - 单据管理模块

### 8.1 dms_shipment - 出运单表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 编号 | |
| confirm_flag | INT | 确认状态 | |
| status | INT | 单据状态 | |
| cust_id | BIGINT | 客户主键 | |
| cust_code | VARCHAR(64) | 客户编号 | |
| cust_contract_code | VARCHAR(64) | 客户合同 | |
| cust_name | VARCHAR(255) | 客户名称 | |
| invoice_code | VARCHAR(64) | 发票号 | |
| settlement_term_type | VARCHAR(32) | 价格条款 | |
| est_ship_date | DATETIME | 预计出运 | |
| ship_date | DATETIME | 出运日期 | |
| order_manager | JSON | 单据员 | UserDept类型 |
| transport_type | INT | 运输方式 | |
| departure_country_id | BIGINT | 出运国主键 | |
| departure_country_name | VARCHAR(64) | 出运国名称 | |
| departure_country_area | VARCHAR(64) | 出运国区域 | |
| departure_port_id | BIGINT | 出运口岸主键 | |
| departure_port_name | VARCHAR(64) | 出运口岸名称 | |
| trade_country_id | BIGINT | 贸易国别主键 | |
| trade_country_name | VARCHAR(64) | 贸易国别名称 | |
| trade_country_area | VARCHAR(64) | 贸易国别区域 | |
| destination_port_id | BIGINT | 目的口岸主键 | |
| destination_port_name | VARCHAR(64) | 目的口岸名称 | |
| trade_type | INT | 贸易方式 | |
| outbound_flag | INT | 是否出仓 | |
| outbound_date | DATETIME | 出仓日期 | |
| shipment_flag | INT | 是否出运 | |
| settle_order_flag | INT | 转结汇单 | |
| declaration_flag | INT | 报关状态 | |
| inovice_noti_flag | INT | 已转开票通知 | |
| foreign_trade_company_id | BIGINT | 外贸公司主体主键 | |
| foreign_trade_company_name | VARCHAR(255) | 外贸公司主体名称 | |
| forwarder_company_id | BIGINT | 船代公司主键 | |
| forwarder_company_name | VARCHAR(255) | 船代公司名称 | |
| ship_num | VARCHAR(64) | 船次 | |
| bill_lading_num | VARCHAR(64) | 提单号 | |
| est_closing_time | DATETIME | 预计结单时间 | |
| est_clearance_time | DATETIME | 预计结关时间 | |
| est_departure_time | DATETIME | 预计结港时间 | |
| twenty_foot_cabinet_num | INT | 20尺柜 | |
| forty_foot_cabinet_num | INT | 40尺柜 | |
| forty_foot_container_num | INT | 40尺高柜 | |
| bulk_handling_volume | DECIMAL(18,4) | 散货 | |
| total_goods_value | JSON | 货值合计 | |
| total_quantity | INT | 数量合计 | |
| total_boxes | INT | 箱数合计 | |
| total_grossweight | JSON | 毛重合计 | |
| total_weight | JSON | 净重合计 | |
| total_volume | DECIMAL(18,4) | 体积合计 | |
| total_declaration | JSON | 报关合计 | |
| total_purchase | JSON | 采购合计 | |
| total_tax_refund_price | JSON | 退税总额 | |
| commission_amount | JSON | 佣金金额 | |
| insurance_fee | JSON | 保险费用 | |
| addition_amount | JSON | 加项金额 | |
| total_addition_amount | JSON | 加项总额 | |
| deduction_amount | JSON | 减项金额 | |
| total_deduction_amount | JSON | 减项总额 | |
| received_num | INT | 已收货值 | |
| unreceived_num | INT | 未收货值 | |
| input_user | JSON | 录入人 | |
| input_date | DATETIME | 录入日期 | |
| shipment_plan_code | VARCHAR(64) | 计划编号 | |
| change_status | INT | 变更状态 | |
| invoice_notice_flag | INT | 开票标识 | |
| contaner_no | VARCHAR(64) | 柜号 | |
| link_code_list | JSON | 链路编号 | |
| source_code | VARCHAR(64) | 来源编号 | |
| auto_flag | INT | 是否自动生成 | |
| remark | TEXT | 备注 | |
| documenter | JSON | 单证员 | |
| purchase_user_list | JSON | 采购员列表 | |
| manager_list | JSON | 业务员列表 | |
| inbound_date | DATETIME | 进仓日期 | |
| front_shipping_mark | TEXT | 正面唛头 | |
| side_shipping_mark | TEXT | 侧面唛头 | |
| receive_person | VARCHAR(255) | 收货人 | |
| notify_person | VARCHAR(255) | 通知人 | |
| gen_contract_unique_code | VARCHAR(64) | 内部生成编号 | |
| cust_delivery_date | DATETIME | 客户交期 | |
| invoice_date | DATETIME | 发票日期 | |
| batch_flag | INT | 是否分批出运 | |
| source_id | BIGINT | 来源明细ID | |

### 8.2 dms_shipment_item - 出运单明细表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| shipment_id | BIGINT | 出运单主键 | |
| sku_id | BIGINT | 产品主键 | |
| quantity | INT | 数量 | |

### 8.3 dms_shipment_plan - 发货计划表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 计划编号 | |
| status | INT | 状态 | |

### 8.4 dms_declaration - 报关单表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 报关单号 | |
| shipment_id | BIGINT | 出运单主键 | |
| status | INT | 状态 | |

### 8.5 dms_commodity_inspection - 商检表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 商检单号 | |
| shipment_id | BIGINT | 出运单主键 | |

### 8.6 dms_forwarder_company_info - 货代公司信息表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| name | VARCHAR(255) | 公司名称 | |
| code | VARCHAR(64) | 公司编码 | |

### 8.7 dms_forwarder_fee - 货代费用表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| shipment_id | BIGINT | 出运单主键 | |
| fee_type | INT | 费用类型 | |
| amount | JSON | 金额 | |

### 8.8 dms_settlement_form - 结汇单表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 结汇单号 | |
| status | INT | 状态 | |

---

## 9. OA - 办公自动化模块

### 9.1 oa_reimb - 报销表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 表单编码 | |
| print_flag | INT | 打印状态 | |
| print_times | INT | 打印次数 | |
| audit_status | INT | 审核状态 | |
| reimb_type | INT | 报销类型 | |
| description | TEXT | 费用说明 | |
| company_id | BIGINT | 报销主体 | |
| reimb_user | JSON | 报销人 | UserDept类型 |
| actual_user | JSON | 实际使用人 | |
| auxiliary_type | INT | 费用归属类型 | |
| contract_list | TEXT | 关联合同列表 | |
| invoice_amount_list | JSON | 发票总金额列表 | |
| total_amount_list | JSON | 本次报销金额列表 | |
| amount_list | JSON | 报销金额列表 | |
| repay_flag | INT | 是否还款 | |
| repay_amount_list | JSON | 借款单还款金额列表 | |
| payment_amount | JSON | 已支付金额 | |
| payment_status | INT | 支付状态 | |
| payment_date | DATETIME | 最后支付日期 | |
| bank | VARCHAR(128) | 开户行 | |
| bank_account | VARCHAR(64) | 银行账号 | |
| bank_address | VARCHAR(256) | 开户行地址 | |
| bank_poc | VARCHAR(64) | 开户行联系人 | |
| bank_code | VARCHAR(64) | 银行行号 | |
| reimb_detail_list | JSON | 报销明细 | |
| user_flag | INT | 实际操作人 | |
| cashier | JSON | 出纳员 | |
| invoice | JSON | 发票 | |
| expense_use_to_formal | VARCHAR(255) | 费用用途(正式) | |
| expense_use_to_occur | VARCHAR(255) | 费用用途(发生) | |
| financial_subject_id | BIGINT | 科目主键 | |
| remark | VARCHAR(512) | 备注 | |
| currency | VARCHAR(16) | 币种 | |
| dict_subject_id | BIGINT | 类别主键 | |
| loan_app_list | JSON | 借款申请单列表 | |
| expense_use_to_formal_id | BIGINT | 费用用途主键 | |
| draft_flag | INT | 是否草稿 | |
| print_date | DATETIME | 打印日期 | |
| annex | JSON | 附件 | |
| apply_id_list | JSON | 费用申请ID列表 | |
| process_instance_id | VARCHAR(64) | 流程实例ID | |
| approve_user | JSON | 当前审批人 | |
| cancel_time | DATETIME | 作废时间 | |
| cancel_reason | VARCHAR(512) | 作废原因 | |
| cancel_user | JSON | 作废人 | |

### 9.2 oa_loan_app - 借款申请表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 单据编号 | |
| print_flag | INT | 打印状态 | |
| print_times | INT | 打印次数 | |
| audit_status | INT | 审核状态 | |
| purpose | TEXT | 借款事由 | |
| applyer | JSON | 申请人 | UserDept类型 |
| amount | JSON | 借款金额 | JsonAmount类型 |
| loan_date | DATETIME | 借款申请日期 | |
| loan_type | INT | 借款方式 | |
| bank | VARCHAR(128) | 开户行 | |
| bank_address | VARCHAR(256) | 银行地址 | |
| bank_account | VARCHAR(64) | 银行账号 | |
| bank_poc | VARCHAR(64) | 开户行联系人 | |
| bank_code | VARCHAR(64) | 银行行号 | |
| payment_status | INT | 支付状态 | |
| payment_amount | JSON | 已转金额 | |
| payment_date | DATETIME | 支付日期 | |
| repay_status | INT | 还款状态 | |
| repay_amount | JSON | 已还金额 | |
| repay_date | DATETIME | 实际还款日期 | |
| outstanding_amount | JSON | 剩余未还款金额 | |
| company_id | BIGINT | 内部法人单位 | |
| cashier | JSON | 出纳员 | |
| loan_source | INT | 借款类型 | |
| annex | JSON | 附件 | |
| loan_status | INT | 借款状态 | |
| deadline_time | DATETIME | 截止时间 | |
| purchase_contract_code | VARCHAR(64) | 采购合同编号 | |
| vender_id | BIGINT | 供应商ID | |
| vender_code | VARCHAR(64) | 供应商编号 | |
| vender_name | VARCHAR(255) | 供应商名称 | |
| exchange_rate | VARCHAR(32) | 汇率 | |

### 9.3 oa_travel_app - 出差申请表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 申请单号 | |
| applyer | JSON | 申请人 | |
| purpose | TEXT | 出差事由 | |
| destination | VARCHAR(255) | 目的地 | |
| start_date | DATETIME | 开始日期 | |
| end_date | DATETIME | 结束日期 | |
| audit_status | INT | 审核状态 | |

### 9.4 oa_payment_app - 付款申请表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 申请单号 | |
| amount | JSON | 申请金额 | |
| audit_status | INT | 审核状态 | |

### 9.5 oa_repay_app - 还款申请表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 申请单号 | |
| loan_app_id | BIGINT | 借款申请ID | |
| amount | JSON | 还款金额 | |

### 9.6 oa_fee_share - 费用分摊表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| reimb_id | BIGINT | 报销单主键 | |
| share_info | JSON | 分摊信息 | |

### 9.7 oa_subject - 会计科目表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 科目编码 | |
| name | VARCHAR(128) | 科目名称 | |

### 9.8 oa_dict_subject - 科目字典表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 字典编码 | |
| name | VARCHAR(128) | 字典名称 | |

---

## 10. FMS - 财务管理模块

### 10.1 fms_receipt - 收款表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 申请单号 | |
| print_flag | INT | 打印状态 | |
| print_times | INT | 打印次数 | |
| audit_status | INT | 审核状态 | |
| company_id | BIGINT | 内部法人单位编号 | |
| bank | VARCHAR(128) | 开户行 | |
| bank_address | VARCHAR(256) | 开户行地址 | |
| bank_account | VARCHAR(64) | 银行账号 | |
| bank_poc | VARCHAR(64) | 开户行联系人 | |
| bank_code | VARCHAR(64) | 银行行号 | |
| amount | JSON | 收款金额 | JsonAmount类型 |
| rate | JSON | 实时汇率 | |
| receipt_time | DATETIME | 收款时间 | |
| remark | VARCHAR(512) | 收款备注 | |
| receipt_user | JSON | 收款人 | UserDept类型 |
| approver | JSON | 最终审批人 | |
| approval_time | DATETIME | 审批时间 | |
| business_type | INT | 业务类型 | |
| business_code | VARCHAR(64) | 业务编号 | |
| business_subject_type | INT | 支付对象类型 | |
| business_subject_code | VARCHAR(64) | 支付对象编号 | |
| status | INT | 收款状态 | |
| receipt_type | INT | 收款方式 | |
| cust_claim_id | INT | 回款认领ID | |

### 10.2 fms_payment - 付款表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 付款单号 | |
| amount | JSON | 付款金额 | |
| status | INT | 状态 | |

### 10.3 fms_bank_registration - 银行登记表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 登记单号 | |
| bank_name | VARCHAR(128) | 银行名称 | |

---

## 11. MMS - 制造管理模块

### 11.1 mms_manufacture - 加工单表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 编号 | |
| input_user_id | BIGINT | 录入人ID | |
| input_user_name | VARCHAR(64) | 录入人姓名 | |
| input_time | DATETIME | 录入时间 | |
| stock_id | BIGINT | 仓库ID | |
| stock_name | VARCHAR(128) | 仓库名称 | |
| company_id | BIGINT | 主体ID | |
| company_name | VARCHAR(255) | 主体名称 | |
| cust_id | BIGINT | 客户ID | |
| cust_code | VARCHAR(64) | 客户编号 | |
| cust_name | VARCHAR(255) | 客户名称 | |
| manufacture_status | INT | 加工单状态 | |
| auto_flag | INT | 是否自动生成 | |
| done_time | DATETIME | 完成加工时间 | |
| finish_time | DATETIME | 结案时间 | |
| finish_desc | VARCHAR(512) | 结案原因 | |
| sale_contract_code | VARCHAR(64) | 销售合同号 | |

### 11.2 mms_manufacture_sku - 制造SKU表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| manufacture_id | BIGINT | 加工单主键 | |
| sku_id | BIGINT | 产品主键 | |
| quantity | INT | 数量 | |

### 11.3 mms_manufacture_sku_item - 制造SKU明细表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| manufacture_sku_id | BIGINT | 制造SKU主键 | |
| component_sku_id | BIGINT | 组件产品主键 | |
| quantity | INT | 数量 | |

---

## 12. DOC - 单据定义模块

### 12.1 doc_document_definition - 单据类型定义表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| code | VARCHAR(64) | 单据类型编码 | 如SALE_CONTRACT |
| name | VARCHAR(128) | 单据类型名称 | 如销售合同 |
| table_name | VARCHAR(64) | 关联的数据库表名 | |
| module_code | VARCHAR(32) | 所属模块编码 | sms/scm/dms等 |
| sort | INT | 排序值 | |
| can_be_source | TINYINT | 是否可作为源单据 | 0-否 1-是 |
| can_be_target | TINYINT | 是否可作为目标单据 | 0-否 1-是 |
| state_config | TEXT | 状态机配置(JSON) | |
| description | VARCHAR(512) | 描述 | |

### 12.2 doc_document_link - 单据链接关系表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| source_doc_id | BIGINT | 源单据ID | |
| target_doc_id | BIGINT | 目标单据ID | |
| source_doc_type | VARCHAR(64) | 源单据类型 | |
| target_doc_type | VARCHAR(64) | 目标单据类型 | |

### 12.3 doc_document_relation_rule - 单据关联规则表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| source_table | VARCHAR(64) | 源表名 | |
| target_table | VARCHAR(64) | 目标表名 | |
| rule | TEXT | 规则配置 | |

### 12.4 doc_document_flow_log - 单据流程日志表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| doc_id | BIGINT | 单据ID | |
| doc_type | VARCHAR(64) | 单据类型 | |
| flow_status | INT | 流程状态 | |
| timestamp | DATETIME | 时间戳 | |

### 12.5 doc_change_impact_field - 变更影响字段表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| field_name | VARCHAR(64) | 字段名 | |
| impact_level | INT | 影响级别 | |

---

## 13. INFRA - 基础设施模块

### 13.1 system_company - 内部法人单位表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| name | VARCHAR(128) | 单位名称 | |
| company_nature | INT | 公司性质 | |
| company_name | VARCHAR(255) | 企业名称 | |
| company_name_eng | VARCHAR(255) | 企业英文名称 | |
| license | JSON | 营业执照 | SimpleFile类型 |
| license_no | VARCHAR(64) | 营业执照号 | |
| company_address | VARCHAR(512) | 企业地址 | |
| company_address_eng | VARCHAR(512) | 企业英文地址 | |
| manager | JSON | 管理员 | UserDept类型 |
| manager_mobile | VARCHAR(32) | 管理员手机号 | |
| manager_mail | VARCHAR(128) | 管理员邮箱 | |
| company_tel | VARCHAR(32) | 企业电话 | |
| company_fax | VARCHAR(32) | 企业传真 | |
| legal_person | VARCHAR(64) | 法人 | |
| enable_flag | INT | 启用标识 | |
| shortname | VARCHAR(64) | 简称 | |
| tax_numb | VARCHAR(64) | 税号 | |
| customs_number | VARCHAR(64) | 海关编号 | |
| picture | JSON | 图片列表 | |
| available_currency_list | JSON | 可用币种列表 | |

### 13.2 system_country_info - 国家信息表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| name | VARCHAR(64) | 国家名称 | |
| code | VARCHAR(16) | 国家编码 | |
| area | VARCHAR(64) | 所属区域 | |

### 13.3 system_settlement - 结算方式表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| name | VARCHAR(64) | 结算名称 | |
| code | VARCHAR(32) | 结算编码 | |

### 13.4 system_currencys_rate - 货币汇率表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| source_currency | VARCHAR(16) | 源币种 | |
| target_currency | VARCHAR(16) | 目标币种 | |
| rate | DECIMAL(18,6) | 汇率 | |
| effective_date | DATE | 生效日期 | |

### 13.5 system_sn - 序列号表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| sn_type | VARCHAR(32) | 序列类型 | |
| current_value | BIGINT | 当前值 | |

### 13.6 system_version - 版本管理表

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| id | BIGINT | 主键 | 自增 |
| table_name | VARCHAR(64) | 表名 | |
| record_id | BIGINT | 记录ID | |
| version | INT | 版本号 | |

---

## 14. 通用字段说明

### 14.1 BaseDO 基础字段

所有表都继承自 `BaseDO`，包含以下通用字段：

| 字段名 | 类型 | 说明 | 备注 |
|-------|------|------|------|
| creator | VARCHAR(64) | 创建者 | |
| create_time | DATETIME | 创建时间 | |
| updater | VARCHAR(64) | 更新者 | |
| update_time | DATETIME | 更新时间 | |
| deleted | BIT | 是否删除 | 0-否 1-是 |
| tenant_id | BIGINT | 租户编号 | 多租户支持 |

### 14.2 JSON 类型说明

系统中使用多种 JSON 类型存储复杂数据：

| 类型名称 | 说明 | 示例 |
|---------|------|------|
| JsonAmount | 金额对象 | `{"value": 100.00, "currency": "USD"}` |
| JsonWeight | 重量对象 | `{"value": 10.5, "unit": "KG"}` |
| UserDept | 用户部门 | `{"userId": 1, "userName": "张三", "deptId": 10}` |
| SimpleFile | 文件对象 | `{"url": "http://...", "name": "file.pdf"}` |
| JsonEffectRange | 数据权限范围 | `{"type": "DEPT", "value": [1,2,3]}` |
| JsonCompanyPath | 订单路径 | `{"path": [...], "current": {...}}` |

---

## 15. 索引设计建议

### 15.1 常用索引

每个业务表建议添加以下索引：

1. **code 字段**: 唯一索引，用于编号查询
2. **status/audit_status**: 普通索引，用于状态筛选
3. **create_time**: 普通索引，用于时间范围查询
4. **关联外键**: 普通索引，如 `cust_id`, `vender_id`, `sale_contract_id` 等

### 15.2 复合索引示例

```sql
-- 外销合同表
CREATE INDEX idx_sale_contract_cust_status ON sms_sale_contract(cust_id, status);
CREATE INDEX idx_sale_contract_date ON sms_sale_contract(sale_contract_date, audit_status);

-- 库存表
CREATE INDEX idx_stock_warehouse_sku ON wms_stock(warehouse_id, sku_id);
CREATE INDEX idx_stock_contract ON wms_stock(sale_contract_id, purchase_contract_id);
```

---

## 16. 数据字典

### 16.1 审核状态 (audit_status)

| 值 | 说明 |
|----|------|
| 0 | 待提交 |
| 1 | 审核中 |
| 2 | 已通过 |
| 3 | 已拒绝 |
| 4 | 已撤回 |

### 16.2 运输方式 (transport_type)

| 值 | 说明 |
|----|------|
| 1 | 海运 |
| 2 | 陆运 |
| 3 | 空运 |
| 4 | 供应商送货 |

### 16.3 客户阶段 (stage_type)

| 值 | 说明 |
|----|------|
| 1 | 潜在客户 |
| 2 | 正式客户 |
| 3 | 退休客户 |

### 16.4 打印状态 (print_flag)

| 值 | 说明 |
|----|------|
| 0 | 未打印 |
| 1 | 已打印 |

### 16.5 启用状态 (enable_flag)

| 值 | 说明 |
|----|------|
| 0 | 禁用 |
| 1 | 启用 |

---

## 17. ER 关系图说明

### 17.1 核心业务关系

```
客户(crm_cust) --1:N--> 外销合同(sms_sale_contract)
外销合同(sms_sale_contract) --1:N--> 采购计划(scm_purchase_plan)
采购计划(scm_purchase_plan) --1:N--> 采购合同(scm_purchase_contract)
供应商(scm_vender) --1:N--> 采购合同(scm_purchase_contract)
采购合同(scm_purchase_contract) --1:N--> 入库单(wms_bill)
入库单(wms_bill) --1:N--> 库存(wms_stock)
外销合同(sms_sale_contract) --1:N--> 出运单(dms_shipment)
```

### 17.2 单据关系链路

```
外销合同 → 采购计划 → 采购合同 → 入库通知 → 入库单 → 库存 → 出库通知 → 出库单 → 出运单 → 报关单
```

---

*文档生成时间: 2026-01-16*
*版本: 1.0*
